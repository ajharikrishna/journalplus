<!DOCTYPE html>
{% load custom_filters %}
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Trade Calendar</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f6f9fc;
        padding: 20px;
      }
      h2 {
        text-align: center;
        color: #2166f3;
        margin-bottom: 20px;
      }
      .calendar-table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        background-color: white;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      }
      .calendar-table th,
      .calendar-table td {
        border: 1px solid #ddd;
        text-align: left;
        vertical-align: top;
        padding: 8px;
        height: 120px;
      }
      .calendar-table th {
        background-color: #e7f0ff;
        font-weight: bold;
        text-align: center;
      }
      .calendar-table td {
        position: relative;
      }
      .trade-entry {
        display: block;
        font-size: 12px;
        margin-bottom: 4px;
      }
      .trade-profit {
        color: green;
        font-weight: bold;
      }
      .trade-loss {
        color: red;
        font-weight: bold;
      }
      .trade-zero {
        color: gray;
      }
      .today {
        background-color: #fff9c4;
        border: 2px solid #fbc02d;
      }
      .calendar-table td:hover {
        background-color: #f1f7ff;
      }
    </style>
  </head>
  <body>
    <h2>{{ today|date:"F Y" }} - Trade Calendar</h2>
    <table class="calendar-table">
      <thead>
        <tr>
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
          <th>Fri</th>
          <th>Sat</th>
          <th>Sun</th>
        </tr>
      </thead>
      <tbody>
        {% for week in calendar_weeks %}
        <tr>
          {% for day in week %} {% if day %}
          <td class="{% if day == today %}today{% endif %}">
            <strong>{{ day.day }}</strong><br />
            {% for trade in trades_by_day|get_item:day %}
            <span
              class="trade-entry {% if trade.trade_return > 0 %}trade-profit {% elif trade.trade_return < 0 %}trade-loss {% else %}trade-zero{% endif %}"
            >
              {{ trade.symbol }} ({{ trade.trade_return }})
            </span>
            {% endfor %}
          </td>
          {% else %}
          <td></td>
          {% endif %} {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
