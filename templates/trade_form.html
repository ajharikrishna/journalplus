{% extends 'base.html' %} {% block title %}Add Trade - JournalPlus{% endblock %}
{% block content %}
<div class="mt-4">
  <h3 class="fw-bold text-success mb-4">
    {% if editing %}Edit{% else %}Add New{% endif %} Trade
  </h3>

  <form method="post" enctype="multipart/form-data" class="row g-3">
    {% csrf_token %}

    <div class="col-md-3">
      <label class="form-label">Trade Symbol</label>
      <input type="text" step="0.01" class="form-control" name="trade_symbol" />
    </div>

    <div class="col-md-4">
      <label class="form-label">Trade Type</label>
      <select class="form-select" name="trade_type" required>
        <option value="">Choose...</option>
        <option value="buy">Buy</option>
        <option value="sell">Sell</option>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Trade Category</label>
      <select class="form-select" name="trade_category" required>
        <option value="">Choose...</option>
        <option value="intraday">Intraday</option>
        <option value="swing">Swing</option>
        <option value="fno">F&O</option>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Direction</label>
      <select class="form-select" name="trade_direction" required>
        <option value="">Choose...</option>
        <option value="long" {% if form.trade_direction.value == "long" %}selected{% endif %}>Long</option>
        <option value="short" {% if form.trade_direction.value == "short" %}selected{% endif %}>Short</option>
      </select>
    </div>

    <div class="col-md-4">
      <label class="form-label">Strategy</label>
      <select class="form-select" name="trade_setup_strategy" required>
        <option value="">Choose...</option>
        <option value="breakout">Breakout</option>
        <option value="reversal">Reversal</option>
        <option value="scalping">Scalping</option>
        <option value="other">Other</option>
      </select>
    </div>

    <div class="col-md-3">
      <label class="form-label">Quantity</label>
      <input type="number" class="form-control" name="quantity" required />
    </div>

    <div class="col-md-3">
      <label class="form-label">Entry Price</label>
      <input
        type="number"
        step="0.01"
        class="form-control"
        name="entry_price"
        required
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Exit Price</label>
      <input
        type="number"
        step="0.01"
        class="form-control"
        name="exit_price"
        value="{{ form.exit_price.value }}"
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Exit Date</label>
      <input type="date" class="form-control" name="exit_date" />
    </div>

    <div class="col-md-3">
      <label class="form-label">Target Price</label>
      <input
        type="number"
        step="0.01"
        class="form-control"
        name="target_price"
        value="{{ form.target_price.value }}"
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Stop Loss</label>
      <input
        type="number"
        step="0.01"
        class="form-control"
        name="stop_loss_price"
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Fees</label>
      <input type="number" step="0.01" class="form-control" name="fees" />
    </div>

    <div class="col-md-3">
      <label class="form-label">P&L</label>
      <input
        type="number"
        step="0.01"
        class="form-control"
        name="trade_return"
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">RR Ratio</label>
      <input
        type="number"
        class="form-control"
        name="risk_reward_ratio"
        placeholder="2.1"
      />
    </div>

    <div class="col-md-3">
      <label class="form-label">Outcome</label>
      <select class="form-select" name="trade_outcome">
        <option value="">Choose...</option>
        <option value="win">Win</option>
        <option value="loss">Loss</option>
        <option value="breakeven">Break-even</option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Notes</label>
      <textarea class="form-control" name="notes" rows="3"></textarea>
    </div>

    <div class="col-md-6">
      <label class="form-label">Screenshot (optional)</label>
      <input type="file" class="form-control" name="image" />
    </div>

    <div class="col-12 d-grid mt-3">
      <button type="submit" class="btn btn-success">Save Trade</button>
    </div>
  </form>
</div>
{% endblock %}
